{% extends "users/base.html" %}
{% load static %}
{% load widget_tweaks %}
{% block title %}Apply to Project{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50 py-12 px-4 sm:px-6">
  <div class="max-w-2xl mx-auto bg-white shadow-md rounded-lg overflow-hidden">
    <!-- Header section -->
    <div class="bg-blue-50 px-6 py-4 border-b border-blue-100">
      <h2 class="text-2xl font-semibold text-blue-800">Apply to "{{ project.title }}"</h2>
      <p class="text-gray-600 mt-1">Complete the form below to submit your application</p>
    </div>

    <!-- Form section -->
    <div class="p-6">
      <form method="post" enctype="multipart/form-data" class="space-y-5">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <!-- Progress indicator -->
        <div class="mb-6">
          <div class="flex items-center gap-1">
            <span class="w-1/3 h-1 bg-blue-500 rounded"></span>
            <span class="w-1/3 h-1 bg-blue-500 rounded"></span>
            <span class="w-1/3 h-1 bg-blue-300 rounded"></span>
          </div>
          <div class="flex justify-between text-xs text-gray-500 mt-1">
            <span>Role selection</span>
            <span>Details</span>
            <span>Submit</span>
          </div>
        </div>

        <!-- Applied Role -->
        <div class="bg-white rounded-lg border border-gray-200 p-4">
          <label for="{{ form.applied_role.id_for_label }}" class="block text-gray-700 font-medium mb-2">
            <div class="flex items-center">
              <span class="text-blue-500 mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                </svg>
              </span>
              Select Role <span class="text-red-500">*</span>
            </div>
          </label>
          {{ form.applied_role|add_class:"w-full p-3 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" }}
          {% if form.applied_role.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.applied_role.errors|join:", " }}</p>
          {% endif %}
          <p class="text-xs text-gray-500 mt-1">Choose the role that best matches your skills and experience</p>
        </div>

        <!-- Contribution -->
        <div class="bg-white rounded-lg border border-gray-200 p-4">
          <label for="{{ form.contribution.id_for_label }}" class="block text-gray-700 font-medium mb-2">
            <div class="flex items-center">
              <span class="text-blue-500 mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
                </svg>
              </span>
              How will you contribute? <span class="text-red-500">*</span>
            </div>
          </label>
          {{ form.contribution|add_class:"w-full p-3 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" }}
          {% if form.contribution.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.contribution.errors|join:", " }}</p>
          {% endif %}
          <p class="text-xs text-gray-500 mt-1">Describe your relevant skills and how they align with this project</p>
        </div>

        <!-- Message -->
        <div class="bg-white rounded-lg border border-gray-200 p-4">
          <label for="{{ form.message.id_for_label }}" class="block text-gray-700 font-medium mb-2">
            <div class="flex items-center">
              <span class="text-blue-500 mr-2">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
                </svg>
              </span>
              Personal Message
            </div>
          </label>
          {{ form.message|add_class:"w-full p-3 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" }}
          {% if form.message.errors %}
            <p class="text-red-600 text-sm mt-1">{{ form.message.errors|join:", " }}</p>
          {% endif %}
          <p class="text-xs text-gray-500 mt-1">Optional: Add any additional information you'd like the project owner to know</p>
        </div>

        <!-- Resume Section -->
        <div class="bg-white rounded-lg border border-gray-200 p-4">
          <h3 class="text-gray-700 font-medium mb-3">Resume Information</h3>

          <!-- Upload Resume -->
          <div class="mb-4">
            <label for="{{ form.resume.id_for_label }}" class="block text-gray-700 text-sm mb-2">
              <div class="flex items-center">
                <span class="text-blue-500 mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                  </svg>
                </span>
                Upload Resume (PDF)
              </div>
            </label>
            <div class="flex items-center p-2 bg-gray-50 border border-dashed border-gray-300 rounded-md">
              {{ form.resume|add_class:"w-full text-sm" }}
            </div>
            {% if form.resume.errors %}
              <p class="text-red-600 text-sm mt-1">{{ form.resume.errors|join:", " }}</p>
            {% endif %}
          </div>

          <!-- OR divider -->
          <div class="flex items-center my-3">
            <div class="flex-grow h-px bg-gray-200"></div>
            <span class="px-3 text-sm text-gray-500 bg-white">OR</span>
            <div class="flex-grow h-px bg-gray-200"></div>
          </div>

          <!-- Resume Link -->
          <div>
            <label for="{{ form.resume_link.id_for_label }}" class="block text-gray-700 text-sm mb-2">
              <div class="flex items-center">
                <span class="text-blue-500 mr-2">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                  </svg>
                </span>
                Provide Resume Link
              </div>
            </label>
            {{ form.resume_link|add_class:"w-full p-3 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" }}
            {% if form.resume_link.errors %}
              <p class="text-red-600 text-sm mt-1">{{ form.resume_link.errors|join:", " }}</p>
            {% endif %}
            <p class="text-xs text-gray-500 mt-1">Share a link to your resume on Google Drive, Dropbox, etc.</p>
          </div>
        </div>

        <!-- Form Actions -->
        <div class="flex justify-between items-center pt-4 border-t border-gray-100">
          <a href="{% url 'project-detail' pk=project.pk %}"
             class="flex items-center px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
            </svg>
            Back to Project
          </a>
          <button type="submit"
                  class="flex items-center px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors">
            Submit Application
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
            </svg>
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- Help section -->
  <div class="max-w-2xl mx-auto mt-6 bg-white shadow-md rounded-lg p-4">
    <div class="flex items-start">
      <div class="flex-shrink-0 pt-0.5">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </div>
      <div class="ml-3">
        <h3 class="text-sm font-medium text-gray-700">Need help with your application?</h3>
        <p class="text-xs text-gray-500">Make sure your resume and skills match the project requirements for the best chance of acceptance.</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}